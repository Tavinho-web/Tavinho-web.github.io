:root{
  --bg1:#0b0b14;
  --bg2:#0a1b2d;
  --card: rgba(255,255,255,.06);
  --card2: rgba(255,255,255,.10);
  --text:#f4f4ff;
  --muted:rgba(255,255,255,.72);
  --ring: rgba(255,255,255,.22);

  /* acentos */
  --a1:#ff4fd8;
  --a2:#7c5cff;
  --a3:#22d3ee;
  --a4:#34d399;
  --a5:#fbbf24;
}

*{ box-sizing:border-box; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(900px 600px at 15% 10%, rgba(255,79,216,.22), transparent 55%),
    radial-gradient(850px 520px at 95% 5%, rgba(124,92,255,.22), transparent 55%),
    radial-gradient(900px 520px at 70% 95%, rgba(34,211,238,.18), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
  min-height:100vh;
}

/* burbujitas decorativas */
body::before, body::after{
  content:"";
  position:fixed;
  inset:auto;
  width:360px; height:360px;
  filter: blur(45px);
  opacity:.35;
  pointer-events:none;
  border-radius:999px;
  z-index:-1;
}
body::before{
  left:-120px; top:140px;
  background: radial-gradient(circle at 30% 30%, var(--a4), transparent 60%),
              radial-gradient(circle at 70% 70%, var(--a1), transparent 60%);
}
body::after{
  right:-140px; bottom:120px;
  background: radial-gradient(circle at 30% 30%, var(--a2), transparent 60%),
              radial-gradient(circle at 70% 70%, var(--a5), transparent 60%);
}

.wrap{ max-width: 980px; margin: 0 auto; padding: 28px 18px 60px; }

header{
  display:flex; align-items:flex-end; justify-content:space-between; gap:16px;
  margin-bottom:18px;
  padding:16px 16px;
  border-radius:18px;
  background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);
}

h1{
  font-size: 22px;
  margin:0;
  letter-spacing:.2px;
  background: linear-gradient(90deg, var(--text), rgba(255,255,255,.75));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
.sub{ margin:6px 0 0; color:var(--muted); font-size: 14px; }

/* ✅ AÑADIDO: contenedor de acciones del header */
.headerActions{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-end;
  flex-wrap: wrap;
}

/* ✅ AÑADIDO: botón "Taly" estilo CTA (como "Siguiente sorpresa") */
.talyBtn{
  text-decoration:none;
  color: rgba(10,10,20,.92);
  font-weight: 900;
  padding: 10px 14px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(34,211,238,.95));
  border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 18px 40px rgba(0,0,0,.30);
  transition: transform .15s ease, filter .15s ease;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  white-space: nowrap;
}
.talyBtn:hover{ transform: translateY(-2px); filter: brightness(1.05); }
.talyBtn:active{ transform: translateY(0); }
.talyBtn:focus-visible{
  outline:none;
  box-shadow: 0 0 0 3px var(--ring), 0 18px 40px rgba(0,0,0,.30);
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}
@media (max-width: 720px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

.tile{
  border-radius: 16px;
  overflow:hidden;
  cursor:pointer;
  position:relative;
  outline: none;
  aspect-ratio: 1 / 1;
  padding:0;

  background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  transform: translateY(0);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.tile::before{
  content:"";
  position:absolute; inset:-2px;
  background: linear-gradient(135deg, rgba(255,79,216,.35), rgba(34,211,238,.22), rgba(124,92,255,.30));
  opacity:0;
  transition: opacity .18s ease;
  z-index:0;
  filter: blur(10px);
}
.tile:hover{
  transform: translateY(-4px);
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
  border-color: rgba(255,255,255,.20);
}
.tile:hover::before{ opacity:1; }

.tile img{
  position:relative; z-index:1;
  width:100%; height:100%;
  object-fit: cover;
  display:block;
  transform: scale(1.02);
  transition: transform .2s ease, filter .2s ease;
  filter: saturate(1.08) contrast(1.05) brightness(1.02);
}
.tile:hover img{ transform: scale(1.06); }

.tile:focus-visible{ box-shadow: 0 0 0 3px var(--ring), 0 18px 50px rgba(0,0,0,.35); }

.badge{
  position:absolute; left:10px; bottom:10px;
  font-size:12px; font-weight:700;
  color: rgba(255,255,255,.92);
  background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(34,211,238,.95));
  border:1px solid rgba(255,255,255,.20);
  padding:7px 10px; border-radius: 999px;
  z-index:2;
  box-shadow: 0 10px 20px rgba(0,0,0,.25);
  text-shadow: 0 6px 18px rgba(0,0,0,.35);
}

footer{
  margin-top: 18px;
  color: rgba(255,255,255,.60);
  font-size: 12px;
  padding:10px 2px;
}

/* Modal */
.modal[hidden]{ display:none; }
.modal{
  position:fixed; inset:0;
  background: rgba(0,0,0,.70);
  display:flex; align-items:center; justify-content:center;
  padding: 18px;
  z-index: 50;
}
.panel{
  width:min(920px, 100%);
  border-radius: 18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.14);
  background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  backdrop-filter: blur(12px);
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
}
.panelTop{
  display:flex; justify-content:space-between; align-items:center;
  padding: 12px 14px;
  border-bottom:1px solid rgba(255,255,255,.10);
}
.panelTop .hint{ color:rgba(255,255,255,.72); font-size: 12px; }
.close{
  border:none; background: rgba(255,255,255,.08); color: var(--text);
  font-size: 18px; cursor:pointer;
  padding: 8px 10px; border-radius: 12px;
  transition: transform .15s ease, background .15s ease;
}
.close:hover{ background: rgba(255,255,255,.14); transform: scale(1.03); }

.panelBody{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
}
@media (max-width: 820px){
  .panelBody{ grid-template-columns: 1fr; }
}
.big{
  background: rgba(0,0,0,.25);
  display:flex; align-items:center; justify-content:center;
  padding: 10px;
}
.big img{
  width:100%; height:100%;
  max-height: 72vh;
  object-fit: contain;
  border-radius: 12px;
  background: rgba(0,0,0,.20);
}
.caption{
  padding: 16px 16px 18px;
  display:flex; flex-direction:column; gap:10px;
}
.caption h2{
  margin:0;
  font-size: 16px;
  letter-spacing:.2px;
  background: linear-gradient(90deg, rgba(255,255,255,.95), rgba(255,255,255,.70));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
.caption p{
  margin:0;
  color: rgba(255,255,255,.82);
  line-height: 1.65;
  font-size: 14px;
  white-space: pre-wrap;
  text-wrap: pretty;
}

/* Mejor responsive del modal (especialmente en celular) */
.modal{
  padding:
    calc(18px + env(safe-area-inset-top))
    calc(18px + env(safe-area-inset-right))
    calc(18px + env(safe-area-inset-bottom))
    calc(18px + env(safe-area-inset-left));
}

.panel{
  max-height: 92vh;           /* evita que el modal se "salga" de la pantalla */
  display: flex;
  flex-direction: column;
}

.panelBody{
  flex: 1;
  overflow: hidden;           /* el scroll lo maneja la caption */
}

.caption{
  overflow: auto;             /* permite leer textos largos en móvil */
  -webkit-overflow-scrolling: touch;
}

/* En pantallas pequeñas: imagen más baja + texto scrolleable */
@media (max-width: 520px){
  .big img{
    max-height: 42vh;         /* antes 72vh */
  }
  .caption p{
    font-size: 13px;          /* un pelín más compacto en cel */
  }
}

/* Animaciones suaves */
@keyframes popIn {
  from { transform: translateY(8px) scale(.98); opacity: 0; }
  to   { transform: translateY(0)   scale(1);   opacity: 1; }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.modal{ animation: fadeIn .18s ease; }
.panel{ animation: popIn .22s ease; }

@media (prefers-reduced-motion: reduce){
  .modal, .panel, .tile{ animation:none !important; transition:none !important; }
}

/* Botones de navegación */
.navBtns{
  display:flex;
  gap:10px;
  align-items:center;
}
.navBtn{
  border:none;
  cursor:pointer;
  color: var(--text);
  background: rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.14);
  padding: 8px 10px;
  border-radius: 12px;
  transition: transform .15s ease, background .15s ease;
  font-size: 14px;
}
.navBtn:hover{ background: rgba(255,255,255,.16); transform: translateY(-1px); }
.navBtn:active{ transform: translateY(0); }

/* ===== Fondo en movimiento (suave) ===== */

/* Mueve ligeramente los gradientes del fondo */
body{
  background-size: 200% 200%, 200% 200%, 200% 200%, 100% 100%;
  animation: bgMove 18s ease-in-out infinite;
}

@keyframes bgMove{
  0%{
    background-position: 15% 10%, 95% 5%, 70% 95%, 0 0;
  }
  50%{
    background-position: 10% 18%, 88% 12%, 62% 88%, 0 0;
  }
  100%{
    background-position: 15% 10%, 95% 5%, 70% 95%, 0 0;
  }
}

/* Anima las "burbujas" que ya tienes */
body::before{
  animation: blobA 14s ease-in-out infinite alternate;
  will-change: transform;
}
body::after{
  animation: blobB 17s ease-in-out infinite alternate;
  will-change: transform;
}

@keyframes blobA{
  0%   { transform: translate(0,0) scale(1); }
  50%  { transform: translate(40px,-30px) scale(1.06); }
  100% { transform: translate(-10px,10px) scale(1.02); }
}
@keyframes blobB{
  0%   { transform: translate(0,0) scale(1); }
  50%  { transform: translate(-35px,25px) scale(1.07); }
  100% { transform: translate(10px,-10px) scale(1.03); }
}

/* Respeta accesibilidad: si el usuario prefiere menos movimiento */
@media (prefers-reduced-motion: reduce){
  body{ animation: none; }
  body::before, body::after{ animation: none; }
}

/* Canvas de fondo animado */
#bgCanvas{
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: -2;          /* detrás de todo */
  pointer-events: none; /* no bloquea clicks */
  opacity: .9;
}

.actions{
  margin-top: 16px;
  display:flex;
  justify-content:center;
}
.cta{
  text-decoration:none;
  color: rgba(10,10,20,.92);
  font-weight: 900;
  padding: 12px 16px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(34,211,238,.95));
  border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 18px 40px rgba(0,0,0,.30);
  transition: transform .15s ease, filter .15s ease;
}
.cta:hover{ transform: translateY(-2px); filter: brightness(1.05); }
.cta:active{ transform: translateY(0); }

#confettiCanvas{
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 999;
  pointer-events: none;
}

.logout{
  border:none;
  cursor:pointer;
  color: var(--text);
  background: rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.14);
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 800;
  transition: transform .15s ease, background .15s ease;
  white-space: nowrap;
}
.logout:hover{ background: rgba(255,255,255,.16); transform: translateY(-1px); }
.logout:active{ transform: translateY(0); }

/* En celular: que no se rompa el header */
@media (max-width: 520px){
  header{
    align-items: flex-start;
    gap: 10px;
  }

  /* ✅ AÑADIDO: acciones del header mejor en móvil */
  .headerActions{
    width: 100%;
    justify-content: space-between;
  }
}

/* ===== Page transitions (fade + slide) ===== */
.js body{
  opacity: 0;
}

.js body.is-ready{
  opacity: 1;
  transition: opacity .35s ease;
}

.js body.is-leaving{
  opacity: 0;
  transition: opacity .22s ease;
}

/* Animación suave del contenido */
.js .wrap{
  transform: translateY(10px);
}

.js body.is-ready .wrap{
  transform: translateY(0);
  transition: transform .35s ease;
}

.js body.is-leaving .wrap{
  transform: translateY(-8px);
  transition: transform .22s ease;
}

/* Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .js body{ opacity: 1 !important; transition: none !important; }
  .js .wrap{ transform: none !important; transition: none !important; }
}

/* ===== Flip card (modal) ===== */
.panelBody.flipMode{
  padding: 12px;
  display: flex;
  justify-content: center;
  align-items: stretch;
}

.flipCard{
  width: min(920px, 100%);
  height: min(74vh, 640px);
  perspective: 1200px;
  cursor: pointer;
  user-select: none;
  outline: none;
}

.flipCard:focus-visible{
  box-shadow: 0 0 0 3px var(--ring);
  border-radius: 18px;
}

.flipInner{
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform .65s cubic-bezier(.2,.8,.2,1);
  border-radius: 18px;
}

.flipInner.isFlipped{
  transform: rotateY(180deg);
}

.flipFace{
  position: absolute;
  inset: 0;
  border-radius: 18px;
  overflow: hidden;
  backface-visibility: hidden;
  border: 1px solid rgba(255,255,255,.14);
  background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  backdrop-filter: blur(12px);
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
}

/* Frente: imagen */
.flipFront{
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.20);
}
.flipFront img{
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: rgba(0,0,0,.25);
}
.flipHint{
  position: absolute;
  left: 12px;
  bottom: 12px;
  padding: 8px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  color: rgba(255,255,255,.92);
  background: rgba(0,0,0,.38);
  border: 1px solid rgba(255,255,255,.14);
}

/* Atrás: texto */
.flipBack{
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
}
.flipBackContent{
  padding: 16px 16px 18px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  height: 100%;
}

.flipBackContent h2{
  margin: 0 0 10px;
  font-size: 16px;
  letter-spacing: .2px;
  background: linear-gradient(90deg, rgba(255,255,255,.95), rgba(255,255,255,.70));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.flipBackContent p{
  margin: 0;
  color: rgba(255,255,255,.84);
  line-height: 1.7;
  font-size: 14px;
  white-space: pre-wrap;
  text-wrap: pretty;
}

/* Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .flipInner{ transition: none !important; }
}

/* ===== Tipografía "carta": solo el reverso ===== */
:root{
  --fontTitle: "Playfair Display", ui-serif, Georgia, serif;
  --fontLetter: "Cormorant Garamond", ui-serif, Georgia, serif;
}

.flipBackContent h2{
  font-family: var(--fontTitle);
  letter-spacing: .3px;
}

.flipBackContent p{
  font-family: var(--fontLetter);
  font-size: 16px;      /* un poco más "carta" */
  line-height: 1.85;
}

/* ===== Album as Boardgame Cards ===== */
:root{
  --fontCardTitle: "Playfair Display", ui-serif, Georgia, serif;
  --fontCardText: "Cormorant Garamond", ui-serif, Georgia, serif;
}

/* Grid: se ve mejor con cartas */
.grid{
  grid-template-columns: repeat(4, minmax(0, 1fr));
}
@media (max-width: 920px){
  .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 720px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

/* Tile se convierte en carta */
.tile.cardTile{
  aspect-ratio: 3 / 4;   /* carta real */
  padding: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  overflow: visible;
  perspective: 1200px;
}

/* "Marco" exterior con borde gradiente */
.tile.cardTile .cardInner{
  width: 100%;
  height: 100%;
  border-radius: 18px;
  transform-style: preserve-3d;
  transition: transform .65s cubic-bezier(.2,.8,.2,1);
  position: relative;

  background:
    linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05)) padding-box,
    linear-gradient(135deg, rgba(255,79,216,.45), rgba(34,211,238,.25), rgba(124,92,255,.40)) border-box;
  border: 1px solid transparent;

  box-shadow: 0 14px 40px rgba(0,0,0,.35);
}

.tile.cardTile:hover .cardInner{
  transform: translateY(-4px);
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
}

.tile.cardTile.isFlipped .cardInner{
  transform: rotateY(180deg);
}

/* Caras */
.cardFace{
  position: absolute;
  inset: 0;
  border-radius: 18px;
  overflow: hidden;
  backface-visibility: hidden;
}

/* FRONT layout */
.cardFront{
  display: grid;
  grid-template-rows: auto 1fr auto;
}

.cardHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 10px 8px;
  background: rgba(0,0,0,.22);
  border-bottom: 1px solid rgba(255,255,255,.10);
}

.cardName{
  font-family: var(--fontCardTitle);
  font-weight: 800;
  font-size: 14px;
  letter-spacing: .2px;
  color: rgba(255,255,255,.92);
  text-shadow: 0 10px 24px rgba(0,0,0,.45);
  line-height: 1.1;
}

.cardBadge{
  min-width: 30px;
  height: 26px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 0 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  color: rgba(10,10,20,.92);
  background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(34,211,238,.95));
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: 0 10px 20px rgba(0,0,0,.25);
}

.cardArt{
  position: relative;
  margin: 10px;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.22);
}

.cardArt::after{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(600px 220px at 30% 10%, rgba(255,255,255,.18), transparent 55%);
  pointer-events:none;
}

.cardArt img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display:block;
  transform: scale(1.02);
  filter: saturate(1.08) contrast(1.05) brightness(1.02);
}

.cardFooter{
  padding: 10px 12px 12px;
  color: rgba(255,255,255,.70);
  font-size: 12px;
  text-align: center;
  background: rgba(0,0,0,.16);
  border-top: 1px solid rgba(255,255,255,.10);
}

/* BACK */
.cardBack{
  transform: rotateY(180deg);
  display: grid;
  grid-template-rows: auto 1fr auto;

  /* "papel" */
  background: linear-gradient(180deg, rgba(255,249,242,.96), rgba(255,255,255,.94));
  color: rgba(15,15,25,.92);
}

.backHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 10px 8px;
  border-bottom: 1px solid rgba(0,0,0,.10);
  background: rgba(0,0,0,.03);
}

.backName{
  font-family: var(--fontCardTitle);
  font-weight: 800;
  font-size: 14px;
  color: rgba(12,12,18,.92);
  line-height: 1.1;
}

.backBody{
  padding: 12px 12px 10px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  /* líneas tipo cuaderno */
  background:
    repeating-linear-gradient(
      180deg,
      rgba(0,0,0,.06) 0px,
      rgba(0,0,0,.06) 1px,
      transparent 1px,
      transparent 26px
    );
}

.backText{
  margin: 0;
  font-family: var(--fontCardText);
  font-size: 16px;
  line-height: 1.75;
  white-space: pre-wrap;
  text-wrap: pretty;
  color: rgba(10,10,18,.86);
  text-shadow: 0 1px 0 rgba(255,255,255,.35);
}

.backFooter{
  padding: 10px 12px 12px;
  text-align: center;
  font-size: 12px;
  color: rgba(20,20,30,.60);
  border-top: 1px solid rgba(0,0,0,.10);
  background: rgba(0,0,0,.03);
}

/* Accesibilidad: reduce motion */
@media (prefers-reduced-motion: reduce){
  .tile.cardTile .cardInner{ transition:none !important; }
  .tile.cardTile:hover .cardInner{ transform:none !important; }
}

/* ===== Modal: TCG Card ===== */
:root{
  --fontCardTitle: "Playfair Display", ui-serif, Georgia, serif;
  --fontCardText: "Cormorant Garamond", ui-serif, Georgia, serif;
}

.panelBody.tcgBodyWrap{
  display:flex;
  justify-content:center;
  align-items:center;
  padding: 14px;
}

.tcgCard{
  border:none;
  background: transparent;
  padding: 0;
  cursor: pointer;
  width: min(420px, 92vw);
  aspect-ratio: 3 / 4;
  perspective: 1200px;
  outline: none;
}

.tcgCard:focus-visible{
  box-shadow: 0 0 0 3px var(--ring);
  border-radius: 18px;
}

.tcgInner{
  width: 100%;
  height: 100%;
  border-radius: 18px;
  transform-style: preserve-3d;
  transition: transform .65s cubic-bezier(.2,.8,.2,1);
  position: relative;

  /* marco tipo carta */
  background:
    linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05)) padding-box,
    linear-gradient(135deg, rgba(255,79,216,.45), rgba(34,211,238,.25), rgba(124,92,255,.40)) border-box;
  border: 1px solid transparent;

  box-shadow: 0 20px 70px rgba(0,0,0,.55);
}

.tcgInner.isFlipped{ transform: rotateY(180deg); }

.tcgFace{
  position:absolute;
  inset:0;
  border-radius: 18px;
  overflow:hidden;
  backface-visibility: hidden;
}

/* ===== FRONT ===== */
.tcgFront{
  display:grid;
  grid-template-rows: auto 1fr auto;
  background: rgba(0,0,0,.18);
}

.tcgHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding: 10px 10px 8px;
  background: rgba(0,0,0,.22);
  border-bottom: 1px solid rgba(255,255,255,.10);
}

.tcgHeader.back{
  background: rgba(0,0,0,.03);
  border-bottom: 1px solid rgba(0,0,0,.10);
}

.tcgName{
  font-family: var(--fontCardTitle);
  font-weight: 800;
  font-size: 14px;
  letter-spacing: .2px;
  line-height: 1.1;
}

.tcgFront .tcgName{
  color: rgba(255,255,255,.92);
  text-shadow: 0 10px 24px rgba(0,0,0,.45);
}

.tcgBack .tcgName{
  color: rgba(12,12,18,.92);
}

.tcgBadge{
  min-width: 30px;
  height: 26px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 0 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  color: rgba(10,10,20,.92);
  background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(34,211,238,.95));
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: 0 10px 20px rgba(0,0,0,.25);
}

.tcgArt{
  position: relative;
  margin: 10px;
  border-radius: 14px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.24);
}

.tcgArt::after{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(600px 220px at 30% 10%, rgba(255,255,255,.18), transparent 55%);
  pointer-events:none;
}

.tcgArt img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  filter: saturate(1.08) contrast(1.05) brightness(1.02);
}

.tcgFooter{
  padding: 10px 12px 12px;
  text-align:center;
  font-size: 12px;
  color: rgba(255,255,255,.70);
  background: rgba(0,0,0,.16);
  border-top: 1px solid rgba(255,255,255,.10);
}

.tcgFooter.back{
  color: rgba(20,20,30,.60);
  background: rgba(0,0,0,.03);
  border-top: 1px solid rgba(0,0,0,.10);
}

/* ===== BACK (lore/papel) ===== */
.tcgBack{
  transform: rotateY(180deg);
  display:grid;
  grid-template-rows: auto 1fr auto;
  background: linear-gradient(180deg, rgba(255,249,242,.96), rgba(255,255,255,.94));
  color: rgba(15,15,25,.92);
}

.tcgLore{
  padding: 12px 12px 10px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  /* líneas tipo cuaderno */
  background:
    repeating-linear-gradient(
      180deg,
      rgba(0,0,0,.06) 0px,
      rgba(0,0,0,.06) 1px,
      transparent 1px,
      transparent 26px
    );
}

.tcgText{
  margin: 0;
  font-family: var(--fontCardText);
  font-size: 16px;
  line-height: 1.8;
  white-space: pre-wrap;
  text-wrap: pretty;
  color: rgba(10,10,18,.86);
  text-shadow: 0 1px 0 rgba(255,255,255,.35);
}

/* Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .tcgInner{ transition:none !important; }
}

/* ===== Modal: quitar "carta grande" (panel) y dejar solo la TCG ===== */

/* Quita fondo/borde/sombra del panel grande */
.panel{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
  overflow: visible !important;
}

/* Quita la barra superior oscura del panel */
.panelTop{
  background: transparent !important;
  border-bottom: none !important;
  padding: 8px 0 !important;
}

/* Opcional: baja un poco el hint para que no "ensucie" */
.panelTop .hint{
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(255,255,255,.12);
  padding: 8px 10px;
  border-radius: 999px;
}

/* Ajusta el cuerpo para centrar la carta y sin márgenes raros */
.panelBody.tcgBodyWrap{
  padding: 8px 0 0 !important;
}

/* Si quieres que la carta se vea más "flotando" */
.tcgCard{
  filter: drop-shadow(0 26px 80px rgba(0,0,0,.65));
}

/* Header (botones X, flechas) "flota" sin caja */
.navBtns .navBtn, .navBtns .close{
  background: rgba(0,0,0,.35) !important;
  border: 1px solid rgba(255,255,255,.14) !important;
}

/* ===== Back con el mismo fondo del álbum ===== */
.tcgBack{
  /* mismo fondo que body del album */
  background:
    radial-gradient(900px 600px at 15% 10%, rgba(255,79,216,.22), transparent 55%),
    radial-gradient(850px 520px at 95% 5%, rgba(124,92,255,.22), transparent 55%),
    radial-gradient(900px 520px at 70% 95%, rgba(34,211,238,.18), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg2)) !important;

  color: rgba(255,255,255,.92) !important;
}

/* header del back tipo glass */
.tcgHeader.back{
  background: rgba(255,255,255,.06) !important;
  border-bottom: 1px solid rgba(255,255,255,.12) !important;
}

/* Área del texto: en vez de "papel blanco", glass/paper oscuro */
.tcgLore{
  background:
    linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) padding-box,
    linear-gradient(135deg, rgba(255,79,216,.30), rgba(34,211,238,.20), rgba(124,92,255,.26)) border-box !important;
  border: 1px solid transparent !important;

  border-radius: 14px;
  margin: 12px;
  padding: 14px 14px 16px;

  /* quitamos las líneas tipo cuaderno */
  box-shadow: 0 18px 55px rgba(0,0,0,.35);
}

/* Texto claro y cómodo */
.tcgText{
  color: rgba(255,255,255,.85) !important;
  text-shadow: 0 10px 22px rgba(0,0,0,.35);
  line-height: 1.8;
}

/* Footer back */
.tcgFooter.back{
  background: rgba(255,255,255,.06) !important;
  border-top: 1px solid rgba(255,255,255,.12) !important;
  color: rgba(255,255,255,.70) !important;
}

/* opcional: un "glow" suave atrás del lore */
.tcgLore::before{
  content:"";
  position:absolute;
  inset:-18px;
  border-radius: 18px;
  background:
    radial-gradient(260px 180px at 20% 15%, rgba(255,79,216,.16), transparent 60%),
    radial-gradient(260px 180px at 80% 85%, rgba(34,211,238,.12), transparent 60%);
  filter: blur(14px);
  opacity: .9;
  pointer-events:none;
}
.tcgLore{ position: relative; overflow: hidden; }
/* Asegura que los botones del header estén por encima de la carta */
.panelTop{
  position: relative;
  z-index: 5;
}
.tcgCard{
  position: relative;
  z-index: 1;
}

/* ===== INTRO: ocultar descripciones/etiquetas SOLO en intro ===== */
body.introPage :is(.tile,.shot,.photo,.card) :is(
  .badge,
  .caption,
  .captionBar,
  .desc,
  .label,
  .tag,
  .chip,
  .pill,
  .topTag,
  .cornerTag,
  .meta,
  .overlayText
){
  display: none !important;
}

/* Si el texto se dibuja con ::after/::before usando attr(data-*) */
body.introPage :is(.tile,.shot,.photo,.card)::after,
body.introPage :is(.tile,.shot,.photo,.card)::before{
  content: "" !important;
}

/* =========================================================
   INTRO: dejar SOLO imagenes (oculta TODO excepto img)
   No afecta album.html porque esta scoping a .introPage
   ========================================================= */

body.introPage .grid > *,
body.introPage .collage > *,
body.introPage .masonry > *,
body.introPage .introGrid > *{
  position: relative;
}

/* En cada tarjeta/tile del intro: oculta TODO menos la imagen */
body.introPage .grid > * > :not(img),
body.introPage .collage > * > :not(img),
body.introPage .masonry > * > :not(img),
body.introPage .introGrid > * > :not(img){
  display: none !important;
}

/* Por si el texto/etiquetas est�n como overlays ABSOLUTE dentro (divs/spans/etc) */
body.introPage .grid > * *:not(img),
body.introPage .collage > * *:not(img),
body.introPage .masonry > * *:not(img),
body.introPage .introGrid > * *:not(img){
  display: none !important;
}

/* Por si los textos est�n en ::before/::after */
body.introPage .grid > *::before,
body.introPage .grid > *::after,
body.introPage .collage > *::before,
body.introPage .collage > *::after,
body.introPage .masonry > *::before,
body.introPage .masonry > *::after,
body.introPage .introGrid > *::before,
body.introPage .introGrid > *::after{
  content: "" !important;
  display: none !important;
}

/* Asegura que la imagen se siga viendo igual */
body.introPage .grid > * > img,
body.introPage .collage > * > img,
body.introPage .masonry > * > img,
body.introPage .introGrid > * > img{
  display: block !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover;
}
